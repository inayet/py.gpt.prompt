@startuml
!theme blueprint

' Define classes

class SessionQueue {
  - ConfigurationManager config
  - SessionToken token
  - SessionPolicy policy
  - ChatModel model
  - list transcript
  - list messages
  - string name
}

class Singleton {
  // Singleton class properties and methods go here
}

class MappingTemplate {
  // MappingTemplate class properties and methods go here
}

class ConfigurationManager extends Singleton, MappingTemplate {
  - Path file_path
  - dict data
  + dict load()
  + None save()
  + None backup()
  + Any get_value()
  + str get_api_key()
}

class SessionModel {
  ..
}

class SessionToken {
  ..
}

class SessionPolicy {
  ..
}

class ChatModelFactory {
  - ConfigurationManager config
  - dict provider_map
  + ChatModel create_model()
}

class ChatModel {
  + str name
  + int max_tokens
  + int reserve
  + int length
  + dict system_message
  + ChatCompletionMessage get_chat_completions()
  + EmbedData get_embeddings()
}

' Define relationships

SessionQueue o-- ConfigurationManager : uses >
SessionQueue o-- SessionModel : uses >
SessionQueue o-- SessionToken : uses >
SessionQueue o-- SessionPolicy : uses >
SessionQueue o-- ChatModelFactory : uses >
ChatModelFactory o-- ChatModel : creates >
@enduml